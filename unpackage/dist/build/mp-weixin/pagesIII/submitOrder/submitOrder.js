(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesIII/submitOrder/submitOrder"],{"0c5e":function(t,n,e){},"51b3":function(t,n,e){"use strict";e.r(n);var o=e("bdf7"),a=e("638e");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("c75d");var r,u=e("f0c5"),s=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=s.exports},"638e":function(t,n,e){"use strict";e.r(n);var o=e("9c01"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},"9c01":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("09cc"),a=e("0efb"),i=(t.getStorageSync("usermen"),console),r=i.log,u={components:{},data:function(){return{payUrl:"",isTop:!0,ids:"",goodsData:[],hasCoupon:!0,insufficient:!1,show:!1,extraUserInfo:{},totalPrice:{},ids2:"",orderNumber:"",extraData:{},idList:"",url:"",name:"arrowright",unit:"rpx",size:32,color:"#000",margin:"0"}},computed:{allGoodsNum:function(){var t=this.goodsData,n=0;return t.forEach((function(t){n+=t.number})),n}},methods:{clip:function(){t.setClipboardData({data:this.payUrl,success:function(){console.log("success")}})},gtePayORderTel:function(){var n=this,e=t.getStorageSync("usermen"),i={id:this.ids,token:e};(0,o.publicing)(a.postSettle,i).then((function(t){console.log(t),n.extraUserInfo=t.data.data.extraData.userInfo,n.goodsData=t.data.data.data,n.extraData=t.data.data.extraData})).catch((function(t){console.log(t)}))},gtePayORder:function(){var n=this,e=t.getStorageSync("usermen"),i={id:this.ids,token:e};(0,o.publicing)(a.postSettle,i).then((function(t){console.log(t),n.extraUserInfo=t.data.data.extraData.userInfo,n.goodsData=t.data.data.data,n.extraData=t.data.data.extraData;var e=n.goodsData.map((function(t){return t.id})),o="";for(var a in e)o=o+e[a]+",";console.log("idList====",o),o=o.substring(0,o.length-1),console.log("idList去除逗号后====",o),r(o),n.ids=o})).catch((function(t){console.log(t)}))},getQueryString:function(t,n){if(t)for(var e=t.split("?")[1]||"",o=e.split("&")||[],a=0;a<o.length;a++){var i=decodeURIComponent(o[a].split("=")[0]),r=decodeURIComponent(o[a].split("=")[1]);if(n===i)return r}else;},SubmitOrder:function(){var n=this,e=this,i=t.getStorageSync("usermen"),u={id:e.ids,token:i};(0,o.listing)(a.getSubmitOrder,u).then((function(t){r(t);t.data.data.orderNumber;n.payUrl=t.data.data.payUrl,e.clip()})).catch((function(t){r(t)}))},testPay:function(){plus.runtime.openURL(this.payUrl)},open:function(){console.log("dianji"),this.$refs.popup.show()},chooseAddr:function(){t.navigateTo({url:"../address/address"})},btnPay:function(n){t.showLoading({title:"支付中",duration:2e3});var e={orderNumber:n};(0,o.publicing)(a.postOrderPay,e).then((function(n){r(n),t.showToast({title:"".concat(n.data.msg),icon:"none",duration:2e3}),t.reLaunch({url:"../PayOK/PayOK"})})).catch((function(t){r(t)}))},popupClose:function(){this.show=!1}},onLoad:function(t){this.url=a.imgurl,this.ids=t.ids,console.log("结算页面获得的ids====",this.ids),this.gtePayORderTel();var n=getCurrentPages();console.log(n,1241212);n[n.length-1];var e=n[n.length-2];r(e.$page.fullPath),"/pages/order/order"===e.$page.fullPath?(r("我执行了加购清单"),this.gtePayORder()):"/pagesIII/productDetail/productDetail"==e.$page.fullPath&&r("我执行了立即购买")}};n.default=u}).call(this,e("543d")["default"])},bdf7:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={tuiListCell:function(){return e.e("components/tui-list-cell/tui-list-cell").then(e.bind(null,"174d"))},tuiButton:function(){return e.e("components/tui-button/tui-button").then(e.bind(null,"a5c6"))},wybPopup:function(){return e.e("components/wyb-popup/wyb-popup").then(e.bind(null,"1f69"))}},a=function(){var t=this,n=t.$createElement;t._self._c},i=[]},c75d:function(t,n,e){"use strict";var o=e("0c5e"),a=e.n(o);a.a},e631:function(t,n,e){"use strict";(function(t){e("abd2");o(e("66fd"));var n=o(e("51b3"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["e631","common/runtime","common/vendor"]]]);