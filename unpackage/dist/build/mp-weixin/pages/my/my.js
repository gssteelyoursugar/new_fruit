(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/my"],{"1b69":function(t,e,n){"use strict";n.r(e);var o=n("aee1"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"285d":function(t,e,n){},"5f5b":function(t,e,n){"use strict";(function(t){n("5361");o(n("66fd"));var e=o(n("ec4d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},9567:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={tuiListCell:function(){return n.e("components/tui-list-cell/tui-list-cell").then(n.bind(null,"5ba1"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[]},aee1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2b9e"),a=n("2b28"),i=(t.getStorageSync("userIN"),t.getStorageSync("usermen"),console),r=i.log,s=(n("f230"),{onLoad:function(e){var n=this,o=t.getStorageSync("usermen");o&&this.getOrderData();var a={};t.getSystemInfo({success:function(t){n.width=a.left||t.windowWidth,n.height=a.top?a.top+a.height+8:t.statusBarHeight+44,n.top=a.top?a.top+(a.height-32)/2:t.statusBarHeight+6,n.scrollH=.6*t.windowWidth}})},data:function(){return{lists:[],modaishow:!1,show:!0,wxlogin:!0,usering:{},imageUrl:"/static/images/wode.png",kefuID:"",loadding:!1,pullUpOn:!0,ApproveStatus:void 0,loginText:"",logMsg:"去认证我的店铺",showBtn:!1,user_phone:"",fukuanList:"",fahuoList:"",shouhuoList:"",tuikuanList:"",dangerUsr:!1}},methods:{getUserInfo:function(e){this.usering=e.detail.userInfo,t.setStorageSync("userIN",e.detail.userInfo);t.setStorageSync("userIN",e.detail.userInfo);if(e.detail.userInfo){var n=e.detail.userInfo;this.wxCode(n.avatarUrl,n.nickName)}this.ifUser()},wxCode:function(t,e){var n=this;wx.login({success:function(t){var e=t.code;n.wxLoging(e)},fail:function(t){r(t)}})},wxLoging:function(e){var n=this,i={code:e};t.showLoading({title:"加载中",icon:"none",duration:2e3}),(0,o.publicing2)(a.loginis,i).then((function(e){if(500==e.data.statusCode)return t.showToast({title:"登录出错,请重新登录",icon:"none"}),void setTimeout((function(){t.removeStorageSync("userIN"),t.removeStorageSync("usermen"),t.removeStorageSync("StoreStatus"),t.removeStorageSync("userIN"),n.ifUser()}),1500);200==e.data.statusCode&&n.getOrderData(),t.setStorageSync("usermen",e.data.token),t.hideLoading(),n.getOrderData(),n.getMerchants()})).catch((function(e){t.showToast({title:"".concat(e)}),r(e)}))},getMerchants:function(){var e=this,n=t.getStorageSync("usermen");if(!n)return this.modaishow=!0,void(this.ApproveStatus=void 0);this.modaishow=!1;var i={token:n};(0,o.listing)(a.getClient,i).then((function(n){if(201==n.data.code)return e.dangerUsr=!0,e.user_phone=n.data.phone,void(e.logMsg="账户已被停用");if(500==n.data.code&&(t.showToast({title:"登录超时,请重试",icon:"none",duration:3e3}),setTimeout((function(){t.removeStorageSync("userIN"),t.removeStorageSync("usermen"),t.removeStorageSync("StoreStatus"),t.removeStorageSync("userIN"),e.ifUser()}),1500)),200==n.data.code){e.dangerUsr=!1,e.ApproveStatus=n.data.data.approveStatus,e.user_phone=n.data.data.phone;var o=e.ApproveStatus;void 0===o||null===o||""===o?e.logMsg="去认证我的店铺":0===o?e.logMsg="审核中待通过":1===o?e.logMsg="我的店铺已认证":2===o&&(e.logMsg="未通过,请重新提交")}})).catch((function(t){r(t)}))},getOrderData:function(){var e=this,n=t.getStorageSync("usermen");if(n){var i={token:n,pageNo:1,pageSize:1e4};(0,o.listing)(a.getMyOrder,i).then((function(t){var n=t.data.data;if(0!==n.length){var o=[],a=[],i=[],r=[];n.forEach((function(t){0==t.payStatus&&o.push(t),"1"!=t.tradeStatus&&"2"!=t.tradeStatus&&"3"!=t.tradeStatus||a.push(t),"1"!=t.payStatus||"4"!=t.tradeStatus&&"8"!=t.tradeStatus||i.push(t),"7"==t.tradeStatus&&"3"==t.afterStatus&&r.push(t)})),e.fukuanList=o.length,e.fahuoList=a.length,e.shouhuoList=i.length,e.tuikuanList=r.length,e.$forceUpdate()}})).catch((function(t){r(t)}))}},ifUser:function(){var e=t.getStorageSync("userIN");e?(this.wxlogin=!0,this.usering=e):this.wxlogin=!1},tendShop:function(){var e=t.getStorageSync("usermen");e?t.navigateTo({url:"../../pagesII/tendShop/tendShop"}):(t.showToast({title:"请先登录",icon:"none"}),this.modaishow=!0)},tendShop1:function(){t.navigateTo({url:"../../pagesII/StoreInformation/StoreInformation"})},gotoAfter:function(){this.wxlogin?t.navigateTo({url:"../../pagesIII/navbar/navbar"}):t.showToast({title:"请先登录",icon:"none"})},myOrder:function(){this.wxlogin?t.navigateTo({url:"../../pagesII/myOrder/myOrder?index=0"}):t.showToast({title:"请先登录",icon:"none"})},ToBeDelivered:function(){this.wxlogin?t.navigateTo({url:"../../pagesII/myOrder/myOrder?index=1"}):t.showToast({title:"请先登录",icon:"none"})},ToBeReceived:function(){this.wxlogin?t.navigateTo({url:"../../pagesII/myOrder/myOrder?index=2"}):t.showToast({title:"请先登录",icon:"none"})},ToBePaid:function(){this.wxlogin?t.navigateTo({url:"../../pagesII/myOrder/myOrder?index=3"}):t.showToast({title:"请先登录",icon:"none"})},href:function(e){var n={0:"",1:"../../pagesII/OrderStatistics/OrderStatistics",2:"../../pagesII/Evaluate/Evaluate",3:"../../pagesII/myCollection/myCollection",4:"../../pagesII/customerService/customerService",5:"../../pagesII/message/message",6:"../../pagesII/ruleDescription/ruleDescription",7:"../../pagesII/cooperation/cooperation",8:"../../pagesII/SetUp/SetUp"};5!=e&&6!=e&&7!=e?this.wxlogin?t.navigateTo({url:n[e]}):t.showToast({title:"请先登录",icon:"none"}):t.navigateTo({url:n[e]})},detail:function(){t.navigateTo({url:"../productDetail/productDetail"})},back:function(){t.navigateBack()}},onShow:function(){this.getMerchants(),this.getOrderData(),this.ifUser()},onPullDownRefresh:function(){this.getOrderData(),this.getMerchants(),setTimeout((function(){t.stopPullDownRefresh()}),200)}});e.default=s}).call(this,n("543d")["default"])},c4a4:function(t,e,n){"use strict";var o=n("285d"),a=n.n(o);a.a},ec4d:function(t,e,n){"use strict";n.r(e);var o=n("9567"),a=n("1b69");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("c4a4");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=u.exports}},[["5f5b","common/runtime","common/vendor"]]]);