(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"11d0":function(t,e,n){"use strict";(function(t){n("a4d8");i(n("66fd"));var e=i(n("db7e"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"18fa":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=n("2f62"),a=c(n("7b75")),s=n("a6ff"),r=n("ca88");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(){n.e("pages/index/components/weather").then(function(){return resolve(n("d5fa"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("pages/index/components/banner").then(function(){return resolve(n("59a1"))}.bind(null,n)).catch(n.oe)},f=console,p=f.log,m=!0,v={components:{Weather:g,Banner:h},data:function(){var t;return t={wxlogin:!0,modaishow:!1,isVerify:!1,currentSwiperItem:0,swiperHeight:0,hotGoods:[],topss:0,showAuthTips:!0,address:"",ApproveStatus:0,show:!1,NewGoods:[],WxActivityList:[],WeatherHide:!0,startTime:0,endTime:0,createTime:0,ts:0,mm:0,WxActivityID:"",IndexGoods:[],WxActivity:{},WxTopNavigationBar:[],WxPostersBottomAdve:[],WxPublicMsg:[],WxPublicMsgID:"",WxIndexViewpager:[],HotVarieties:[],url:"http://192.168.1.10:8980/",opcity:.3,bgOpcity:1,scrollH:0,height:84,heightg:84,top:60,canSee:1,num:0,Sumify:"1",noMore:!1,loadding:!1,pageIndex:1,praiseNum:0,praiseNum1:0,showSearch:!1,showSearch1:!1,key:"0619951c6f113f019b42f0bdc2a0e580",webkey:"0b327e5c35240fd476d7b728bf6c825f",city:"",citys:"",temperature:"",amapPlugin:null},d(t,"key","69d24a06f6710467afea85cb0c8db3e1"),d(t,"banner",["6.jpg","6.jpg","6.jpg","6.jpg","6.jpg"]),d(t,"flexing",[{title:"批发市场",name:"送货到店"},{title:"产地直供",name:"一手货源"}]),d(t,"dataList",[{name:"销量排行",value:"shop",title:"跟榜买 不愁卖",imgsrc:"../../static/images/rank_1.png"},{name:"评价排行",value:"praise",title:"好货靠口碑",imgsrc:"../../static/images/rank_2.png"},{name:"关注排行",value:"follow",title:"大家都关注",imgsrc:"../../static/images/rank_3.png"},{name:"复购排行",value:"back",title:"买了又买",imgsrc:"../../static/images/rank_4.png"}]),d(t,"statusHeight",20),d(t,"boxHeight",44),d(t,"navHeight",64),d(t,"weatherObj",{weather:"",temperature:""}),d(t,"tempData",{pageNo:1,pageSize:10}),t},onReachBottom:function(){this.noMore?t.showToast({title:"没有更多啦~",icon:"none"}):(this.tempData.pageNo++,this.getIndexClass())},methods:(i={handleChange:function(t){var e=t.detail.current;this.num=e,this.currentSwiperItem=e,this.IndexGoods=[],this.tempData.pageNo=1,this.noMore=!1,0===this.num?this.Sumify=1:1===this.num&&(this.Sumify=3),this.getIndexClass()},clickToDetail:function(e){t.navigateTo({url:"../../pagesIII/productDetail/productDetail?id="+e})},clickToCart:function(e){var n=this,i=t.getStorageSync("usermen");if(i)if(this.modaishow=!1,null!==this.ApproveStatus&&void 0!==this.ApproveStatus&&""!==this.ApproveStatus&&2!==this.ApproveStatus)if(0!==this.ApproveStatus){if(1===this.ApproveStatus){var o={goodsId:e,token:i,number:1};(0,s.publicing)(r.postmyOrder,o).then((function(e){var i=e.data.code;200!=i?t.showToast({title:"".concat(e.data.msg),icon:"none",duration:3e3}):(n.canCart=!0,t.showToast({title:"加入进货单成功",icon:"none",duration:3e3}),n.orderIng())})).catch((function(t){p(t)}))}}else t.showToast({title:"店铺信息审核中",icon:"none"});else this.toggleVerify();else this.modaishow=!0},orderIng:function(){var e=t.getStorageSync("usermen"),n={token:e};(0,s.listing)(r.getCart,n).then((function(e){if(e.data.code&&200!=e.data.code)t.showToast({title:e.data.msg,icon:"none"});else{var n=e.data.data;if(n){var i=0;n.forEach((function(t){t.list&&(i+=t.list.length)})),0!==n.length?t.setTabBarBadge({index:3,text:i+""}):t.removeTabBarBadge({index:3})}}})).catch((function(t){p(t)}))},messcancel:function(){this.modaishow=!1},toggleVerify:function(){this.isVerify=!this.isVerify},clickToVerify:function(){t.navigateTo({url:"../../pagesII/tendShop/tendShop"}),this.toggleVerify()},getHeight:function(){var e=this,n=t.createSelectorQuery().in(this);n.select(".tui-product-list").boundingClientRect((function(t){e.swiperHeight=parseInt(t.height)})).exec()},flexClick:function(t){this.num=t,this.currentSwiperItem=t},getIndexClass:function(){var e=this,n=Object.assign({indexClassify:this.Sumify},this.tempData);t.showLoading({title:"加载中..."}),(0,s.listing)(r.getClassify,n).then((function(n){setTimeout((function(){t.hideLoading()}),200);var i=n.data.data.data;e.IndexGoods=e.IndexGoods.concat(i),setTimeout((function(){e.getHeight()}),100),(0==i.length||i.length<e.tempData.pageSize)&&(e.noMore=!0)})).catch((function(t){p(t)}))},getHomelist:function(){var e=this,n=t.getStorageSync("usermen"),i={pageNo:"1",pageSize:"1000",token:n};(0,s.listing)(r.getIndex,i).then((function(t){e.hotGoods=t.data.data.hotGoods,e.address=t.data.data.address,e.HotVarieties=t.data.data.HotVarieties,e.WxTopNavigationBar=t.data.data.WxTopNavigationBar,e.WxIndexViewpager=t.data.data.WxIndexViewpager,e.WxPublicMsg=t.data.data.WxPublicMsg,e.WxPublicMsgID=t.data.data.WxPublicMsg.id,e.WxPostersBottomAdve=t.data.data.WxPostersBottomAdve,e.NewGoods=t.data.data.NewGoods.goods,e.WxActivity=t.data.data.WxActivity,e.WxActivityID=t.data.data.WxActivity.id,e.WxActivityList=t.data.data.WxActivity.list,e.startTime=t.data.data.WxActivity.startTime,e.endTime=t.data.data.WxActivity.endTime,e.createTime=t.data.data.WxActivity.createTime,e.ts=(e.endTime-e.createTime)/1e3,e.dd=parseInt(e.ts/60/60/24,10),e.hh=parseInt(e.ts/60/60%24,10),e.mm=parseInt(e.ts/60%60),e.ss=parseInt(e.ts%60,10)})).catch((function(t){console.log(t)}))},goToLimit:function(e){t.navigateTo({url:e.url})},getMerchants:function(){var e=this,n=t.getStorageSync("usermen");if(n){var i={token:n};(0,s.listing)(r.getClient,i).then((function(n){if(n.data.code&&200!=n.data.code)return t.showToast({title:n.data.msg,icon:"none",duration:3e3}),e.ApproveStatus=void 0,void t.switchTab({url:"../my/my"});e.ApproveStatus=n.data.data.approveStatus;var i=n.data.data.address;e.amapPlugin=new a.default.AMapWX({key:e.key}),e.amapPlugin.getWeather({city:i,success:function(t){e.weatherObj.temperature=t.liveData.temperature,e.weatherObj.weather=t.liveData.weather}})})).catch((function(t){p(t)}))}else this.ApproveStatus=0},golook:function(){t.navigateTo({url:"../../pagesII/Recently/Recently"})},popupState:function(t){},goTimeInfo:function(e,n,i,o){t.navigateTo({url:"../../pagesII/timeInfo/timeInfo?id="+e+"&content="+n+"&createDate="+o+"&title="+i})},endOfTime:function(){},hrefKing:function(e,n,i){var o="";switch(e){case 0:o="../../pagesII/seasonal/seasonal?title="+i+"&id="+n;break;case 1:o="../../pagesII/hotFruit/hotFruit?title="+i+"&id="+n;break;case 2:o="../../pagesII/ImportedFruit/ImportedFruit?title="+i+"&id="+n;break;case 3:o="../../pagesII/superValue/superValue?title="+i+"&id="+n;break;case 4:o="../../pagesII/Recently/Recently?title="+i+"&id="+n;break;default:break}o?t.navigateTo({url:o}):t.showToast({title:"功能未完成~",icon:"none"})},goMessage:function(){t.navigateTo({url:"../../pagesII/message/message"})},gotoGun:function(){t.switchTab({url:"../../pages/search/search"})},onPageScroll:function(t){this.topss=t.scrollTop,this.statusHeight>20?(t.scrollTop<20&&(this.canSee=1-t.scrollTop/10,this.opcity=.3+t.scrollTop/50),t.scrollTop<70&&(this.bgOpcity=1+t.scrollTop/100),t.scrollTop>=70&&(this.opcity=1,this.canSee=0),t.scrollTop>70&&(this.bgOpcity=0)):(t.scrollTop<14&&(this.canSee=1-t.scrollTop/10,this.opcity=.3+t.scrollTop/50),t.scrollTop<40&&(this.bgOpcity=1+t.scrollTop/100),t.scrollTop>=40&&(this.opcity=1,this.canSee=0),t.scrollTop>40&&(this.bgOpcity=0)),0===t.scrollTop&&(this.opcity=0,this.canSee=1)},getUserInfo:function(e){if(e.detail.userInfo){t.setStorageSync("userIN",e.detail.userInfo);var n=e.detail.userInfo;this.wxCode(n.avatarUrl,n.nickName)}this.modaishow=!1},wxCode:function(t,e){var n=this;wx.login({success:function(t){var e=t.code;n.wxLoging(e)},fail:function(t){p(t)}})},wxLoging:function(e){var n=this,i={code:e};(0,s.publicing2)(r.loginis,i).then((function(e){if(200==e.statusCode&&500==e.data.statusCode)return t.showToast({title:"登录信息过期,请重新登录",icon:"none"}),void setTimeout((function(){t.removeStorageSync("userIN"),t.removeStorageSync("usermen"),t.removeStorageSync("StoreStatus"),n.ifUser()}),1e3);t.setStorageSync("usermen",e.data.token);t.getStorageSync("usermen");t.hideLoading(),setTimeout((function(){t.showToast({title:"登录成功"})}),100),n.wxlogin=!0,n.getMerchants()})).catch((function(t){p(t)}))},ifUser:function(){var e=t.getStorageSync("usermen");e?(this.wxlogin=!0,this.usering=e):this.wxlogin=!1},numConvert:function(t){return t>=1e4?t=Math.round(t/1e3)/10+"万":t>=1e3&&(t=Math.round(t/100)/10+"千"),t}},d(i,"numConvert",(function(t){return t>=1e4?t=Math.round(t/1e3)/10+"w":t>=1e3&&(t=Math.round(t/100)/10+"k"),t})),d(i,"goLimit",(function(){var e=this.WxActivityID;t.navigateTo({url:"../../pagesII/Limit/Limit?id="+e})})),d(i,"fruitGo",(function(){t.navigateTo({url:"../../pagesII/fruitList/fruitList"})})),d(i,"goToRank",(function(){t.navigateTo({url:"../../pagesII/rankingList/rankingList?index=0&value=shop"})})),d(i,"gotoBreed",(function(e,n){t.navigateTo({url:"../../pagesII/productList/productList?name="+e+"&id="+n})})),d(i,"gotoList",(function(e){t.navigateTo({url:"../../pagesIII/productDetail/productDetail?id="+e})})),d(i,"praise",(function(t){this.IndexGoods[t].showSearch1||(this.IndexGoods[t].showSearch1=!0,this.IndexGoods[t].praiseNum1++)})),d(i,"praise1",(function(t){m&&(this.showSearch1=!this.showSearch1,this.praiseNum1++,m=!1)})),d(i,"scanCode",(function(){t.scanCode({scanType:["barCode"],success:function(e){t.showModal({title:"提示",content:"条形码类型：".concat(e.scanType,"\n\t\t\t\t\t\t\t\t   条形码内容：").concat(e.result),success:function(t){t.confirm||t.cancel}})}})})),i),onPullDownRefresh:function(){this.IndexGoods=[],this.tempData.pageNo=1,this.noMore=!1,this.getMerchants(),this.getHomelist(),this.getIndexClass(),t.stopPullDownRefresh()},onLoad:function(){var e=this;this.getMerchants(),this.getIndexClass(),this.getHomelist();var n=t.getSystemInfoSync(),i=n.statusBarHeight,o=t.getMenuButtonBoundingClientRect(),a=o.top,s=o.bottom;this.statusHeight=i;var r=s-i+(a-i),c=i+r+a-i;this.boxHeight=c-i,this.navHeight=c,setTimeout((function(){e.showAuthTips=!1}),5e3)},onNavigationBarButtonTap:function(t){},onShow:function(){var e=t.getStorageSync("usermen");e&&this.orderIng(),this.getMerchants(),this.getHomelist(),this.ifUser()},onShareAppMessage:function(){return{title:"",imageUrl:"../../static/images/taozi.jpg"}},mounted:function(){t.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},filters:{filterNum:function(t){if(t){var e=(Math.floor(t)+"").split(""),n="";return e.length<=4&&(n=t),5===e.length&&(n=e[0]+"."+e[1]+"万"),6===e.length&&(n=e[0]+e[1]+"."+e[2]+"万"),7===e.length&&(n=e[0]+e[1]+e[2]+"."+e[3]+"万"),8===e.length&&(n=e[0]+e[1]+e[2]+e[3]+"."+e[4]+"万"),9===e.length&&(n=e[0]+"."+e[1]+"亿"),10===e.length&&(n=e[0]+e[1]+"."+e[2]+"亿"),n}return t}},computed:l(l({},(0,o.mapState)(["screendata"])),{},{isShowUnit:function(t){}})};e.default=v}).call(this,n("543d")["default"])},"374f":function(t,e,n){},"7dfe":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={tuiCountdown:function(){return n.e("components/tui-countdown/tui-countdown").then(n.bind(null,"69a1"))},tuiNomore:function(){return n.e("components/tui-nomore/tui-nomore").then(n.bind(null,"3fa6"))},backTop:function(){return n.e("components/back-top/back-top").then(n.bind(null,"4468"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.IndexGoods,(function(e,n){var i=t.__get_orig(e),o=(n+1)%2!=0?t._f("filterNum")(e.total):null;return{$orig:i,f0:o}}))),i=t.__map(t.IndexGoods,(function(e,n){var i=t.__get_orig(e),o=(n+1)%2==0?t._f("filterNum")(e.total):null;return{$orig:i,f1:o}})),o=t.__map(t.IndexGoods,(function(e,n){var i=t.__get_orig(e),o=(n+1)%2!=0?t._f("filterNum")(e.praiseNumber):null,a=(n+1)%2!=0?t._f("filterNum")(e.total):null;return{$orig:i,f2:o,f3:a}})),a=t.__map(t.IndexGoods,(function(e,n){var i=t.__get_orig(e),o=(n+1)%2==0?t._f("filterNum")(e.praiseNumber):null,a=(n+1)%2==0?t._f("filterNum")(e.total):null;return{$orig:i,f4:o,f5:a}}));t.$mp.data=Object.assign({},{$root:{l0:n,l1:i,l2:o,l3:a}})},a=[]},ade3:function(t,e,n){"use strict";n.r(e);var i=n("18fa"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},cf41:function(t,e,n){"use strict";var i=n("374f"),o=n.n(i);o.a},db7e:function(t,e,n){"use strict";n.r(e);var i=n("7dfe"),o=n("ade3");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("cf41");var s,r=n("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"13028878",null,!1,i["a"],s);e["default"]=c.exports}},[["11d0","common/runtime","common/vendor"]]]);