(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesII/updataStore/updataStore"],{272:
/*!************************************************************************************************!*\
  !*** /Users/gsheng/Downloads/new_fruit/main.js?{"page":"pagesII%2FupdataStore%2FupdataStore"} ***!
  \************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";(function(e){s(/*! uni-pages */4);a(s(/*! vue */2));var t=a(s(/*! ./pagesII/updataStore/updataStore.vue */273));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},273:
/*!*****************************************************************************!*\
  !*** /Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue ***!
  \*****************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! ./updataStore.vue?vue&type=template&id=b72df940& */274),i=s(/*! ./updataStore.vue?vue&type=script&lang=js& */276);for(var r in i)"default"!==r&&function(e){s.d(t,e,(function(){return i[e]}))}(r);s(/*! ./updataStore.vue?vue&type=style&index=0&lang=css& */278);var n,d=s(/*! ../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),o=Object(d["default"])(i["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],n);o.options.__file="pagesII/updataStore/updataStore.vue",t["default"]=o.exports},274:
/*!************************************************************************************************************!*\
  !*** /Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=template&id=b72df940& ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updataStore.vue?vue&type=template&id=b72df940& */275);s.d(t,"render",(function(){return a["render"]})),s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),s.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),s.d(t,"components",(function(){return a["components"]}))},275:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=template&id=b72df940& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,s){"use strict";s.r(t),s.d(t,"render",(function(){return i})),s.d(t,"staticRenderFns",(function(){return n})),s.d(t,"recyclableRender",(function(){return r})),s.d(t,"components",(function(){return a}));var a={tuiListCell:function(){return s.e(/*! import() | components/tui-list-cell/tui-list-cell */"components/tui-list-cell/tui-list-cell").then(s.bind(null,/*! @/components/tui-list-cell/tui-list-cell.vue */462))},tuiIcon:function(){return s.e(/*! import() | components/tui-icon/tui-icon */"components/tui-icon/tui-icon").then(s.bind(null,/*! @/components/tui-icon/tui-icon.vue */406))}},i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,n=[];i._withStripped=!0},276:
/*!******************************************************************************************************!*\
  !*** /Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updataStore.vue?vue&type=script&lang=js& */277),i=s.n(a);for(var r in a)"default"!==r&&function(e){s.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},277:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(/*! ../../api/api.js */20),i=s(/*! ../../api/request.js */22),r=e.getStorageSync("usermen"),n=console,d=n.log,o=s(/*! @/utils/picker.city.js */133),u=s(/*! @/common/tui-validation/tui-validation.js */132),l={data:function(){return{selectList:o,multiArray:[],value:[0,0,0],text1:"请选择店铺所处省市区",id:"",idAddress:"",addressAllData:[],addressOne:[],addressTwo:[],addressThree:[],textAddress:"",Address1:"",urlListFlag:[!1,!1,!1,!1],urlList:[],checkList:[{id:"",title:"门头照片",name:"me_1",url:""},{id:"",title:"水果陈列照片",name:"me_2",url:""},{id:"",title:"卸货区",name:"me_3",url:""},{id:"",title:"工商营业执照",name:"me_4",url:""}],imgName:["门头照","水果陈列照","卸货区","工商营业执照"],imgDataLi:[{title:"门头照片",name:"me_1",url:""},{title:"水果陈列照片",name:"me_2",url:""},{title:"卸货区",name:"me_3",url:""},{title:"工商营业执照",name:"me_4",url:""}],imgUrlData0:"../../static/images/B@2x.png",imgUrlData1:"../../static/images/B@2x.png",imgUrlData2:"../../static/images/B@2x.png",imgUrlData3:"../../static/images/B@2x.png",updataImg0:"",updataImg1:"",updataImg2:"",updataImg3:"",imagesList:[{url:"../../static/images/B@2x.png"},{url:"../../static/images/B@2x.png"},{url:"../../static/images/B@2x.png"},{url:"../../static/images/B@2x.png"}],storeName:"请填写店铺名",merchantsName:"填写姓名",phone:"请输入收货人手机号码",address:"南宁",serviceNumber:"",files:[],imageList:[],category:"image",ctx:{},StoreInfo:{},cartIds:[],imgUrlData:"",addressDetails:"请填写详细地址",flag:!1,idList:[]}},methods:{picker:function(e){console.log("pick=============",e);var t=e.detail.value,s=this.addressOne[t[0]],a=this.addressTwo[t[1]],i=this.addressThree[t[2]];this.text1=s.name+" "+a.name+" "+i.name;var r=this.getAddressById(i.id),n=this.getAddressById(r.pId),d=this.getAddressById(n.pId);this.textAddress=d.name+"/"+n.name+"/"+r.name,this.address=i.id,this.StoreInfo.address=this.textAddress,this.idAddress=i.id,this.StoreInfo.address=this.textAddress,this.Address1=this.idAddress},toArr:function(e){var t=[];for(var s in e)t.push(e[s].name);return t},columnPicker:function(e){var t=e.detail.column,s=e.detail.value;if(0===t){var a=this.addressOne[s],i=this.getAddressByPId(a.id),r=this.getAddressByPId(i[0].id);this.addressTwo=i,this.addressThree=r,this.multiArray=[this.multiArray[0],this.toArr(i),this.toArr(r)],this.value=[s,0,0]}else if(1===t){var n=this.addressTwo[s],d=this.getAddressByPId(n.id);this.addressThree=d,this.multiArray=[this.multiArray[0],this.multiArray[1],this.toArr(d)],this.value=[this.value[0],s,0]}else if(2===t){var o=this.addressThree[s];this.ADDressID=o.id}},postAddressDatas:function(){var e=this,t=this;(0,a.publicing)(i.postAddressList).then((function(s){e.addressAllData=s.data,e.addressOne=e.getAddressByPId("0"),e.addressTwo=e.getAddressByPId(e.addressOne[0].id),e.addressThree=e.getAddressByPId(e.addressTwo[0].id),e.multiArray=[e.toArr(e.addressOne),e.toArr(e.addressTwo),e.toArr(e.addressThree)],t.getMerchants()})).catch((function(e){d(e)}))},getAddressByPId:function(e){for(var t=new Array,s=0;s<this.addressAllData.length;s++){var a=this.addressAllData[s];a.pId===e&&t.push(a)}return t},getAddressById:function(e){for(var t=0;t<this.addressAllData.length;t++){var s=this.addressAllData[t];if(s.id===e)return s}return null},delImg:function(e){var t=this.urlList,s=this.idList;t[e].url="",s.push(t[e].id),this.urlList=t,this.urlListFlag[e]=!1,this.idList=s},uploadImages:function(e,t){var s=this;s.flag=!0,(0,i.uploadFiles)((function(t){s.urlList[e].url=t.data,s.urlListFlag[e]=!0}))},postUpdateStore:function(t){d(t);var s=[{name:"storeName",rule:["required","isChinese","minLength:2","maxLength:20"],msg:["请输入店铺名称","店铺名必须全部为中文","请输入2个或以上字符","不能超过20个字符"]},{name:"merchantsName",rule:["required","isChinese","minLength:2","maxLength:6"],msg:["请输入真实姓名","姓名必须全部为中文","姓名必须2个或以上字符","不能超过6个字符"]},{name:"phone",rule:["required","isMobile"],msg:["请输入手机号","请输入正确的手机号"]},{name:"address",rule:["minLength:4"],msg:["请选择地区","请选择地区!!!","请选择地区!!!","请选择地区!!!!"]},{name:"addressDetails",rule:["required","isChinese","minLength:4","maxLength:30"],msg:["请填写详细地址","请填写详细地址!!!","请填写详细地址!!!","请填写详细地址!!!!"]}],r=t.detail.value,n=u.validation(r,s);if(n)e.showToast({title:n,icon:"none"});else{var o=[];for(var l in this.urlListFlag)this.urlListFlag[l]&&o.push(this.urlList[l]);var c=e.getStorageSync("usermen"),m={storeName:t.detail.value.storeName,merchantsName:t.detail.value.merchantsName,phone:t.detail.value.phone,address:this.Address1,token:c,type:1,addressDetails:t.detail.value.addressDetails,fileUrls:JSON.stringify(o),delFileIds:this.idList.join(",")};(0,a.publicing)(i.postupdateClient,m).then((function(t){-1!==t.data.code?200===t.data.code&&(e.showToast({title:"".concat(t.data.msg),icon:"none",duration:3e3}),wx.switchTab({url:"../../pages/my/my",success:function(e){var t=getCurrentPages().pop();void 0!=t&&null!=t&&t.onLoad()}})):e.showToast({title:"".concat(t.data.msg),icon:"none",duration:3e3})})).catch((function(e){d(e)}))}},getMerchants:function(){var t=this,s=e.getStorageSync("usermen"),r={token:s};(0,a.listing)(i.getClient,r).then((function(e){t.ApproveStatus=e.data.data.approveStatus,t.StoreInfo=e.data.data;var s=e.data.data.urlList,a=t.checkList;s.forEach((function(e,t){a.forEach((function(t,s){e.name===t.name&&(t.url=e.url,t.id=e.id)}))})),a.sort((function(e,t){return e.name.replace(/[^0-9]/gi,"")-t.name.replace(/[^0-9]/gi,"")})),t.urlList=a,t.Address1=e.data.data.address;var i=t.getAddressById(t.StoreInfo.address),r=t.getAddressById(i.pId),n=t.getAddressById(r.pId);t.textAddress=n.name+"/"+r.name+"/"+i.name,t.StoreInfo.address=t.textAddress})).catch((function(e){d(e)}))},onPullDownRefresh:function(){this.postAddressDatas(),this.getMerchants(),d(r),setTimeout((function(){e.stopPullDownRefresh()}),1e3)},postsaveStores:function(){var t=e.getStorageSync("usermen");d(t),d(data),e.showLoading({title:"提交中"}),(0,a.publicing)(i.postSaveStore,data).then((function(t){d(t),e.hideLoading(),e.showToast({title:"".concat(t.data.msg),icon:"none"})})).catch((function(e){d(e)}))},getToken:function(){var t=e.getStorageSync("usermen");d(t)},chooseImage:function(t){var s=this;s.files.length>=9?this.tui.toast("最多上传9张图片"):e.chooseImage({count:9-s.files.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){s.files=s.files.concat(e.tempFilePaths)}})},previewImage:function(t){e.previewImage({current:t.currentTarget.id,urls:this.files})},deleteImage:function(e){var t=e.index;this.files.splice(t,1)},formSubmit:function(t){var s=[{name:"storeName",rule:["required","isChinese","minLength:2","maxLength:6"],msg:["请输入店铺名姓名","姓名必须全部为中文","姓名必须2个或以上字符","姓名不能超过6个字符"]},{name:"mobile",rule:["required","isMobile"],msg:["请输入手机号","请输入正确的手机号"]}],a=t.detail.value,i=u.validation(a,s);i?e.showToast({title:i,icon:"none"}):e.showToast({title:"提交!",icon:"none"})},formReset:function(e){}},onLoad:function(){this.postAddressDatas(),d(r),this.getMerchants()}};t.default=l}).call(this,s(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},278:
/*!**************************************************************************************************************!*\
  !*** /Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updataStore.vue?vue&type=style&index=0&lang=css& */279),i=s.n(a);for(var r in a)"default"!==r&&function(e){s.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},279:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/gsheng/Downloads/new_fruit/pagesII/updataStore/updataStore.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,s){}},[[272,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesII/updataStore/updataStore.js.map