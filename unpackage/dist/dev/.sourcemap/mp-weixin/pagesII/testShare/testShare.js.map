{"version":3,"sources":["uni-app:///main.js","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?b369","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?d14c","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?cabf","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?5a42","uni-app:///pagesII/testShare/testShare.vue","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?d242","webpack:////Users/gsheng/Downloads/new_fruit/pagesII/testShare/testShare.vue?ba6e"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2G;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACa;;;AAGrE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwzB,CAAgB,uyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACO50B;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,kBAFA;AAGA,mBAHA;AAIA,iBAJA;AAKA,oBALA;AAMA,gCANA,EAMA;AACA,qBAPA,EAOA;AACA,wBARA,EAQA;AACA,kBATA,CASA;AATA;AAWA,GAbA;;AAeA,QAfA,kBAeA,OAfA,EAeA;AACA;AACA,qBADA,GACA,iCADA;AAEA,eAHA;AAIA,qCAJA,SAIA,gBAJA;AAKA;AACA,uLADA,CALA,SAKA,aALA;;AAQA,+DARA,CAQA;AACA,gEATA,CASA;AACA;AACA,iCAXA;;AAaA,GA5BA;AA6BA;AACA,cADA,wBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4JAPA,CAOA;;AAEA;AACA;AACA,kCADA;;AAGA;AACA,8BAdA,CAcA;AACA,mCAfA,CAeA;;;AAGA;AACA;AACA,gCApBA,CAoBA;AACA,oFArBA,CAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAPA,MAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAfA,MAeA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAhDA,CAgDA;AACA,sCAjDA,CAiDA;AACA,uEAlDA,CAkDA;;AAEA,8BApDA,CAoDA;AACA,sCArDA,CAqDA;AACA,qFAtDA,CAsDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,kBAFA;AAGA,kBAHA;AAIA,wBAJA;AAKA;AACA;AACA;AACA,eARA;;AAUA,WAhBA;;AAkBA,SA7FA,EA6FA,IA7FA;AA8FA;AACA,KAlGA;AAmGA,eAnGA,yBAmGA;AACA;AACA,KArGA;AAsGA;AACA,gBAvGA,wBAuGA,KAvGA,EAuGA;AACA;AACA;AACA,oBADA;AAEA;AACA;AACA,WAJA;;AAMA,OAPA;AAQA,KAhHA;AAiHA;AACA,iBAlHA,2BAkHA;AACA;AACA;AACA;AACA;AACA,WAHA;;AAKA,OANA;AAOA,KA1HA,EA7BA,E;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAA+pC,CAAgB,omCAAG,EAAC,C;;;;;;;;;;;ACAnrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesII/testShare/testShare.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagesII/testShare/testShare.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./testShare.vue?vue&type=template&id=36eb1e82&\"\nvar renderjs\nimport script from \"./testShare.vue?vue&type=script&lang=js&\"\nexport * from \"./testShare.vue?vue&type=script&lang=js&\"\nimport style0 from \"./testShare.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesII/testShare/testShare.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testShare.vue?vue&type=template&id=36eb1e82&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testShare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testShare.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view v-if=\"!canShow\">\r\n\t\t<canvas @click=\"clickCanvas\" style=\"background-color: rgba(0,197,42,.2);\" :style=\"{ width: canvasW / 2+ 'px', height: canvasH / 2+ 'px' }\" canvas-id=\"sharePost\"></canvas>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tcanShow: false,\r\n\t\t\t\tcanvasW: 750,\r\n\t\t\t\tcanvasH: 1206,\r\n\t\t\t\tmainImg: \"\",\r\n\t\t\t\tSystemInfo: {},\r\n\t\t\t\ttitle: '田阳巨无霸桂七芒果1个500克以上', // 商品标题\r\n\t\t\t\tprice: '999.99', // 价格\r\n\t\t\t\tOldprice: '350.00', // 原价\r\n\t\t\t\tname: '天涯过客', // 推荐人\r\n\t\t\t}\r\n\t\t},\n\t\t\r\n\t\tasync onLoad(options) {\n\t\t\tif (options.scene) {\n\t\t\t\tlet scene = decodeURIComponent(options.scene)\n\t\t\t}\n\t\t\tthis.SystemInfo = await this.getSystemInfo();\r\n\t\t\tthis.mainImg = await this.getImageInfo(\r\n\t\t\t\t\"https://qg-qr.oss-cn-shenzhen.aliyuncs.com/test/1609933250271.jpg?Expires=1925293249&OSSAccessKeyId=LTAI4G74cnhsbDWNkfvuNew3&Signature=liYq8qCQDtyGq0C3dY2hp2ANeAw%3D\"\r\n\t\t\t)\n\t\t\tthis.canvasW = this.SystemInfo.windowWidth * 2; // 画布宽度\r\n\t\t\tthis.canvasH = this.SystemInfo.windowHeight * 2; // 画布高度\n\t\t\tconsole.log(this.SystemInfo.windowWidth,this.SystemInfo.windowHeight,this.canvasW,this.canvasH)\n\t\t\tthis.drawCanvas()\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\n\t\t\tdrawCanvas () {\n\t\t\t\tif (this.mainImg.errMsg == 'getImageInfo:ok' && this.SystemInfo.errMsg == 'getSystemInfo:ok') {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst ctx = uni.createCanvasContext('sharePost', this)\n\t\t\t\t\t\t// 设置矩形边框\n\t\t\t\t\t\tctx.setFillStyle(\"#FFF\");\n\t\t\t\t\t\t// 设置矩形宽高 （x,y,宽度，高度） x这里要除2次 ‘2’，\n\t\t\t\t\t\t// 第一次除是因为canvasW是乘了2的值，这里需要还原成没乘之前的值，\n\t\t\t\t\t\t// 第二次除是因为得到的是 2边空白的宽度，\n\t\t\t\t\t\tctx.fillRect(this.canvasW / 2 * 0.1 / 2, this.canvasW / 2 * 0.1 / 2, this.canvasW / 2 * 0.9, this.canvasH / 2 - this.canvasW / 2 * 0.1 ) // fillRect(x,y,宽度，高度)\n\t\t\t\t\n\t\t\t\t\t\t// 商品主图\n\t\t\t\t\t\tctx.drawImage(this.mainImg.path, this.canvasW / 2 * 0.1, this.canvasH / 2 * 0.1 / 1.5, this.canvasW / 2 * 0.8,\n\t\t\t\t\t\t\tthis.canvasW / 2 * 0.8)\n\t\t\t\t\n\t\t\t\t\t\t// 3、绘制商品标题，多余文字自动换行\n\t\t\t\t\t\tctx.setFontSize(18); // setFontSize() 设置字体字号\n\t\t\t\t\t\tctx.setFillStyle('#000'); // setFillStyle() 设置字体颜色\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\t/* canvas不能自动换行，需要自行计算 */\n\t\t\t\t\t\tlet _strlineW = 0;\n\t\t\t\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\t\t\t\tlet _strHeight = this.canvasW / 2 * 0.8 + this.canvasH / 2 * 0.1 + 10; //绘制字体距离canvas顶部的初始高度\n\t\t\t\t\t\tlet _num = 1;\n\t\t\t\t\t\tfor (let i = 0; i < this.title.length; i++) {\n\t\t\t\t\t\t\t_strlineW += ctx.measureText(this.title[i]).width;\n\t\t\t\t\t\t\tif (_strlineW > this.canvasW / 2 * 0.8 - 10) {\n\t\t\t\t\t\t\t\tif (_num == 2 && 2) {\n\t\t\t\t\t\t\t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t\t\t\t\t\t\tctx.fillText(this.title.substring(_strLastIndex, i - 5) + '...', this.canvasW / 2 * 0.1, _strHeight);\n\t\t\t\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t\t\t\t_num++;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tctx.fillText(this.title.substring(_strLastIndex, i), this.canvasW / 2 * 0.1, _strHeight);\n\t\t\t\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t\t\t\t_strHeight += 30;\n\t\t\t\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t\t\t\t_num++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (i == this.title.length - 1) {\n\t\t\t\t\t\t\t\tctx.fillText(this.title.substring(_strLastIndex, i + 1), this.canvasW / 2 * 0.1, _strHeight);\n\t\t\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* end */\n\t\t\t\t\n\t\t\t\t\t\t//4、商品价格\n\t\t\t\t\t\tctx.setFontSize(14) // 字号\n\t\t\t\t\t\tctx.setFillStyle('#e31d1a') // 颜色\n\t\t\t\t\t\tctx.fillText('￥', this.canvasW / 2 * 0.1, _strHeight + 40); // （文字，x，y）\n\t\t\t\t\t\t\n\t\t\t\t\t\tctx.setFontSize(24) // 字号\n\t\t\t\t\t\tctx.setFillStyle('#e31d1a') // 颜色\n\t\t\t\t\t\tctx.fillText(this.price, this.canvasW / 2 * 0.1 + 14, _strHeight + 40); // （文字，x，y）\n\t\t\t\t\t\t\n\t\t\t\t\t\tctx.setFontSize(14)\n\t\t\t\t\t\tctx.setFillStyle('#b8b8b8')\n\t\t\t\t\t\tctx.fillText('原价￥' + this.Oldprice, this.canvasW / 2 * 0.1 + 100, _strHeight + 40);\n\t\t\t\t\n\t\t\t\t\t\t//5、文案\n\t\t\t\t\t\tctx.setFontSize(14)\n\t\t\t\t\t\tctx.setFillStyle('#b8b8b8')\n\t\t\t\t\t\tctx.fillText('长按或扫描识别二维码', this.canvasW / 2 * 0.1, _strHeight + 80);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//5、公司名称\n\t\t\t\t\t\tctx.setFontSize(12)\n\t\t\t\t\t\tctx.setFillStyle('#000')\n\t\t\t\t\t\tctx.fillText('南宁·圈果平台', this.canvasW / 2 * 0.1, this.canvasH/ 2 - 50);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 商品菊花图\n\t\t\t\t\t\tctx.drawImage('../../static/images/jhm.jpg', this.canvasW / 2 - this.canvasW / 2 * 0.34 , this.canvasH / 2 - this.canvasW / 2 * 0.38  , this.canvasW / 2 * 0.25,\n\t\t\t\t\t\t\tthis.canvasW / 2 * 0.25)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 最终绘制\n\t\t\t\t\t\tctx.draw(true, (ret) => { // draw方法 把以上内容画到 canvas 中。\n\t\t\t\t\t\t\t// uni.showToast({\n\t\t\t\t\t\t\t// \ticon: 'success',\n\t\t\t\t\t\t\t// \tmask: true,\n\t\t\t\t\t\t\t// \ttitle: '绘制完成',\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({ // 保存canvas为图片\n\t\t\t\t\t\t\t\tcanvasId: 'sharePost',\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\tquality: 1,\n\t\t\t\t\t\t\t\tcomplete: function(res) {\n\t\t\t\t\t\t\t\t\t// 在H5平台下，tempFilePath 为 base64, // 图片提示跨域 H5保存base64失败，APP端正常输出临时路径\n\t\t\t\t\t\t\t\t\t// console.log(res)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t}, 1500)\n\t\t\t\t}\t\n\t\t\t},\r\n\t\t\tclickCanvas () {\n\t\t\t\tthis.canShow = !this.canShow\n\t\t\t},\r\n\t\t\t// 获取图片信息\r\n\t\t\tgetImageInfo(image) {\r\n\t\t\t\treturn new Promise((req, rej) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: image,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\treq(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取设备信息\r\n\t\t\tgetSystemInfo() {\r\n\t\t\t\treturn new Promise((req, rej) => {\r\n\t\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\treq(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\tbackground: #f7f7f7;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testShare.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testShare.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610521063781\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}